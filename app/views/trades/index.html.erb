<div class="container">
  <h2>Trades</h2>

  <%= render partial: "layouts/league_nav", locals: {active: 6, league: @league, league_membership: @league_membership} %>
    
  <div class="trades-list">
    <%@trades.each do |trade|%>
    <% proposer = @league_memberships.select{|lm| lm.id == trade.proposer_id}.first %>
    <% proposee = @league_memberships.select{|lm| lm.id == trade.proposee_id}.first %>
    
    <div class="row">
      <div class="col-md-12 <%= "tradeable" if @league_membership == proposee %>" data-id="trade<%= trade.id %>">
        <div class="trade-info">
        <%= proposer == @league_membership ? "You" : proposer.name%> 
        proposed a trade with 
        <%= proposee == @league_membership ? "You" : proposee.name%>
        on <%= trade.created_at.to_s(:pretty) %>.
        
        <ul class="list-group">
          <% trade.trade_groups.first.players.each do |player| %>
        
          <li class="list-group-item">
            <img src="<%=player.picture_url%>" width=40>
            <a href="<%=player.url%>" data-id="<%=player.id%>"><%=player.name%></a>
          </li>

          <% end %>
        </ul>
        <h3>FOR</h3>
        <% trade.trade_groups.last.players.each do |player| %>
        <ul class="list-group">
          <li class="list-group-item">
            <img src="<%=player.picture_url%>" width=40>
            <a href="<%=player.url%>" data-id="<%=player.id%>"><%=player.name%></a>
          </li> 
        </ul>
        <% end %>
        
      </div>
    </div>
    </div>
    <% end %>

  </div>
</div>